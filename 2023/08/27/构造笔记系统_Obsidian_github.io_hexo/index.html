<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Yan的杂物志</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1 初心很早就开始分享文档，以技术类的为主，一开始是 MSN，博客，随着平台的更替，后来又用了 CSDN，知乎，简书…… 再后来做只给自己看的 Obsidian，常常有以下困扰：  每个平台都有不同的上格式要求，加上各种审核规则，过于简单的分类，虽然也积累了一些积分和关注，但总觉那不是自己的地盘。并且平台一多，上传也很花时间。 平台更替，被黑，不是我们可以控制的，选哪个都不一定行。 想表达的东西又">
<meta property="og:type" content="article">
<meta property="og:title" content="Yan的杂物志">
<meta property="og:url" content="http://example.com/2023/08/27/%E6%9E%84%E9%80%A0%E7%AC%94%E8%AE%B0%E7%B3%BB%E7%BB%9F_Obsidian_github.io_hexo/index.html">
<meta property="og:site_name" content="Yan的杂物志">
<meta property="og:description" content="1 初心很早就开始分享文档，以技术类的为主，一开始是 MSN，博客，随着平台的更替，后来又用了 CSDN，知乎，简书…… 再后来做只给自己看的 Obsidian，常常有以下困扰：  每个平台都有不同的上格式要求，加上各种审核规则，过于简单的分类，虽然也积累了一些积分和关注，但总觉那不是自己的地盘。并且平台一多，上传也很花时间。 平台更替，被黑，不是我们可以控制的，选哪个都不一定行。 想表达的东西又">
<meta property="og:locale">
<meta property="og:image" content="http://example.com/attachments_2023/Pasted%20image%2020230826093720.png">
<meta property="og:image" content="http://example.com/attachments_2023/Pasted%20image%2020230825215422.png">
<meta property="article:published_time" content="2023-08-27T04:34:37.695Z">
<meta property="article:modified_time" content="2023-08-27T04:34:37.695Z">
<meta property="article:author" content="Yan.Xie">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/attachments_2023/Pasted%20image%2020230826093720.png">
  
    <link rel="alternate" href="/atom.xml" title="Yan的杂物志" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.2"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Yan的杂物志</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-构造笔记系统_Obsidian_github.io_hexo" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2023/08/27/%E6%9E%84%E9%80%A0%E7%AC%94%E8%AE%B0%E7%B3%BB%E7%BB%9F_Obsidian_github.io_hexo/" class="article-date">
  <time datetime="2023-08-27T04:34:37.695Z" itemprop="datePublished">2023-08-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-初心"><a href="#1-初心" class="headerlink" title="1 初心"></a>1 初心</h2><p>很早就开始分享文档，以技术类的为主，一开始是 MSN，博客，随着平台的更替，后来又用了 CSDN，知乎，简书…… 再后来做只给自己看的 Obsidian，常常有以下困扰：</p>
<ul>
<li>每个平台都有不同的上格式要求，加上各种审核规则，过于简单的分类，虽然也积累了一些积分和关注，但总觉那不是自己的地盘。并且平台一多，上传也很花时间。</li>
<li>平台更替，被黑，不是我们可以控制的，选哪个都不一定行。</li>
<li>想表达的东西又很多：技术文，书评，旅行，绘画，其它作品，日常感受；长文与短文，文献与田野的不同风格；每个平台调性，受众不同，全放一起，也显得很不专业。</li>
<li>有时候又想表达，又不想让别人太过了解自己，有点分裂。</li>
</ul>
<p>这么看，自建平台相对来说更自由，更合适：</p>
<ul>
<li>租个每年几百块钱的服务器，或者先用个免费平台；</li>
<li>利用工具方便地切换平台服务，降似切换的时间成本。</li>
<li>打通给自己看的笔记和分享内容，一键分享。</li>
<li>在自己的 blog 和 其它内容建立链接</li>
<li>设计自己的逻辑，做自己喜欢的分类和屏蔽规则，让不同类型的内容互不干涉。</li>
<li>构造一种介于“给自己看”和“给别人看”之间的状态。<h2 id="2-设计"><a href="#2-设计" class="headerlink" title="2 设计"></a>2 设计</h2>主要的思路如下<h3 id="2-1-选平台"><a href="#2-1-选平台" class="headerlink" title="2.1 选平台"></a>2.1 选平台</h3>最终的目标是可以省时省力，随时切换到各种服务器和平台。具体实现是：</li>
<li>先找个免费的平台<br>这里选用了 github.io，它用法类似于 github 普通项目，可方便切换到任何历史版本。</li>
<li>设计方便的切换方法<br>后期可方便地切换到一般的 Linux服务器，主要基于：Docker环境 + Python 后端工具 + JS 前端工具。<ul>
<li>Docker：便于切换平台；</li>
<li>Python：自己对 Python 用着比较顺手，后面还可以加一些有意思的功能；</li>
<li>前端：前端先期选用 Hexo，基于以下原因：<ul>
<li>即可以自己启动服务，也可以生成静态网页及部署功能，嵌入在已有的Web服务之中；</li>
<li>无缝对接之前的 markdown 写作风格；</li>
<li>插件多，且有很多 Theme 可选。<h3 id="2-2-打通私人笔记和分享笔记"><a href="#2-2-打通私人笔记和分享笔记" class="headerlink" title="2.2 打通私人笔记和分享笔记"></a>2.2 打通私人笔记和分享笔记</h3>之前笔记整理在 Obsidian中，使用 markdown 格式，只是文件头写得并不规范，导致转成 Html 后列表卡片显示不正常。这里使用简单的 Python 代码编辑所有文档的文件头。以保证文档正常显示。<br><img src="/attachments_2023/Pasted%20image%2020230826093720.png"><h3 id="2-3-降低分享成本"><a href="#2-3-降低分享成本" class="headerlink" title="2.3 降低分享成本"></a>2.3 降低分享成本</h3></li>
</ul>
</li>
</ul>
</li>
<li>设计分享规则<br>将笔记分为：分享、不分享 两个类别，不分享的包含一些还没写完的文档，以及不方便给别人看的内容，hexo 自带排除部分目录分享的功能。所以只要用目录区分就好了。</li>
<li>Hexo本身支持部署，再通过配置文件和一些简单脚本，实现：一键将 markdown 笔记分享分享到网页。<h3 id="2-4-设计展示"><a href="#2-4-设计展示" class="headerlink" title="2.4 设计展示"></a>2.4 设计展示</h3></li>
<li>Hexo 默认将展示分为：按标签分类、按日期分类、最近的文章、按目录结构分类。先实现简单功能，后期再通过插件扩展。</li>
<li>选择喜欢的展示风格 Theme。<h2 id="3-github-io-建站"><a href="#3-github-io-建站" class="headerlink" title="3 github.io 建站"></a>3 github.io 建站</h2><h4 id="3-1-1-建立仓库"><a href="#3-1-1-建立仓库" class="headerlink" title="3.1.1 建立仓库"></a>3.1.1 建立仓库</h4><a target="_blank" rel="noopener" href="https://github.com/new">https://github.com/new</a></li>
</ul>
<p><img src="/attachments_2023/Pasted%20image%2020230825215422.png" alt="|300"></p>
<h4 id="3-1-2-创建静态网页"><a href="#3-1-2-创建静态网页" class="headerlink" title="3.1.2 创建静态网页"></a>3.1.2 创建静态网页</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git clone git@github.com:xieyan0811/xieyan0811.github.io.git</span><br><span class="line">$ cd xieyan0811.github.io.git</span><br><span class="line">$ echo &#x27;hello world&#x27; &gt; index.html</span><br><span class="line">$ git add index.html</span><br><span class="line">$ git commit -m &#x27;init&#x27;</span><br><span class="line">$ git push origin master</span><br></pre></td></tr></table></figure>
<h4 id="3-1-3-注意"><a href="#3-1-3-注意" class="headerlink" title="3.1.3 注意"></a>3.1.3 注意</h4><ul>
<li>repo name 需要填写：用户名.github.io，只能填写你的用户名。</li>
<li>创建后需要等一会儿，才能访问。</li>
</ul>
<p>进入该项目的 Setting 选项卡<br>左边选 Pages<br>在 Custom domain 中选择一个主题</p>
<h2 id="4-Hexo-框架"><a href="#4-Hexo-框架" class="headerlink" title="4 Hexo 框架"></a>4 Hexo 框架</h2><h4 id="4-1-1-介绍"><a href="#4-1-1-介绍" class="headerlink" title="4.1.1 介绍"></a>4.1.1 介绍</h4><p>我们可以把它想成通过 markdown 文件生成 html 网络的工具。这样生成的静态网页，上传服务器就生成或更新了自己的 blog 了。</p>
<p>安装它之前先要安装 javascript 开发环境，因为怕麻烦，就直接下了 Hexo 的  docker image 的现成环境。</p>
<p>Hexo 是一个简单、快速、强大的基于 Github Pages 的博客发布工具，支持 Markdown 格式，有众多优秀插件和主题。<br>使用Hexo，可以使用Markdown语法编写文章，并通过命令行工具生成静态网页。</p>
<h4 id="4-1-2-配置环境"><a href="#4-1-2-配置环境" class="headerlink" title="4.1.2 配置环境"></a>4.1.2 配置环境</h4><ul>
<li><p>使用 docker 方式安装 hexo，没用太新的，用了个之前的稳定版的轻量级系统 alpine，整个镜像只有几十兆，其中还包含简单的 vi 编辑器。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker pull taskbjorn/hexo:alpine-latest</span><br><span class="line">$ sudo mkdir /exports/hexo_data -p</span><br><span class="line">$ sudo chmod 777 /exports/hexo_data</span><br><span class="line">$ docker run -it --rm --name my_hexo_container --privileged=true -p 4000:4000 -v /exports/hexo_data:/home/hexo/.hexo taskbjorn/hexo:alpine-latest</span><br></pre></td></tr></table></figure>
<p>第一次运行时安装数据到/home/hexo/.hexo目录，比较慢，再启就快了。<br>正常启动后，就可用 localhost:4000 访问本地网站。</p>
</li>
<li><p>从另一个终端进入 docker container:<br>由于安装的是 alpine，需要用 root 权限登入，方便后续安装软件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker exec -u=root -it my_hexo_container sh</span><br></pre></td></tr></table></figure>
<h4 id="4-1-3-基本操作"><a href="#4-1-3-基本操作" class="headerlink" title="4.1.3 基本操作"></a>4.1.3 基本操作</h4></li>
</ul>
<p>在<code>source/_posts</code>目录下创建md的文件，也可以使用hexo n创建md文件，使用hexo g命令生成静态页面，使用hex<br>o s生成预览，通过本地访问页面查看效果。</p>
<p><strong>常用操作</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean</span><br><span class="line">$ hexo generate</span><br><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>hexo g == hexo generate #生成<br>hexo s == hexo server #启动服务预览<br>hexo d == hexo deploy #部署<br>hexo clean #清除缓存</p>
<p>若是少量图片，可以直接把图片存放在source文件夹中</p>
<h3 id="4-2-配置文件"><a href="#4-2-配置文件" class="headerlink" title="4.2 配置文件"></a>4.2 配置文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">_config.yml</span><br><span class="line"></span><br><span class="line">至少设置 site 部分</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 依次是网站标题、副标题、网站描述、作者、网站头像外部链接、网站语言、时区等。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="4-3-Markdown规范"><a href="#4-3-Markdown规范" class="headerlink" title="4.3 Markdown规范"></a>4.3 Markdown规范</h3><p>Obsidian 的 hexo 模板</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: &lt;% tp.file.title %&gt;</span><br><span class="line">author: xieyan0811</span><br><span class="line">date: &lt;% tp.file.creation_date() %&gt;</span><br><span class="line">updated: &lt;% tp.file.last_modified_date() %&gt;</span><br><span class="line">tags:</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<h3 id="4-4-进阶"><a href="#4-4-进阶" class="headerlink" title="4.4 进阶"></a>4.4 进阶</h3><h4 id="4-4-1-显示图片"><a href="#4-4-1-显示图片" class="headerlink" title="4.4.1 显示图片"></a>4.4.1 显示图片</h4><p>Hexo 支持多种显示图片的方法，比如图床，上传图片等方法，这里介绍最简单的方法：</p>
<ul>
<li><p>保持 <code>_config.yml</code> 中 post_asset_folder: false 不变</p>
</li>
<li><p>我在 Obsidian 中图片都放在 attachments/ 目录下，将此目录复制到 hexo项目的 source 目录中，即：source/attachments/xx.png</p>
</li>
<li><p>重新生成后，图片正常显示</p>
<h4 id="4-4-2-Hexo-换主题"><a href="#4-4-2-Hexo-换主题" class="headerlink" title="4.4.2 Hexo 换主题"></a>4.4.2 Hexo 换主题</h4><p>(建议设置一个大家都在用的主题，比如next，遇到问题比较好查资料)</p>
</li>
<li><p>官网主题：<a target="_blank" rel="noopener" href="https://hexo.io/themes/">https://hexo.io/themes/</a><br>后面想发一些 AI 绘画，所以不想底色太过抢眼，感觉定制感也比较高。</p>
</li>
<li><p>npm install hexo-theme-inside # 安装在node_modules/ 目录下</p>
</li>
<li><p>在 <code>_config.yml</code> 改为 theme: inside</p>
</li>
<li><p>复制主题相关配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp node_modules/hexo-theme-inside/_config.yml _config.inside.yml</span><br></pre></td></tr></table></figure></li>
<li><p>配置 <code>_config.inside.yml</code></p>
</li>
<li><p>重新生成后，即可看到新主题</p>
</li>
</ul>
<h4 id="4-4-3-部署博客到-github-io"><a href="#4-4-3-部署博客到-github-io" class="headerlink" title="4.4.3 部署博客到 github.io"></a>4.4.3 部署博客到 github.io</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git</span><br><span class="line">git config --global user.email xieyan0811@sina.com</span><br><span class="line">git config --global user.name xieyan0811f</span><br><span class="line">ssh-keygen -t rsa -C xieyan0811@sina.com # 一路回车</span><br><span class="line"># 如果提示找不到 ssh-keygen，需要在 exec 时切成 root 安装 openssh 见后：apk add openssh </span><br></pre></td></tr></table></figure>
<p>将 /home/hexo/.ssh/id_rsa.pub 加入 github<br><a target="_blank" rel="noopener" href="https://github.com/settings/keys">https://github.com/settings/keys</a> add ssh key<br>ssh <a href="mailto:&#103;&#x69;&#x74;&#64;&#103;&#x69;&#x74;&#104;&#117;&#98;&#46;&#x63;&#111;&#x6d;">&#103;&#x69;&#x74;&#64;&#103;&#x69;&#x74;&#104;&#117;&#98;&#46;&#x63;&#111;&#x6d;</a> # 看能否连接成功，形如: You’ve successfully authenticated</p>
<p>配置文件_config.yml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: &#x27;git&#x27;</span><br><span class="line">  repo: git@github.com:xieyan0811/xieyan0811.github.io # 千万注意这里不是http地址 </span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>

<p>hexo d<br>正常执行后，可以看到 public 目录就被更新到 github.io 主页了，内容也不多，只肜 demo 不到1M</p>
<h4 id="4-4-4-调试"><a href="#4-4-4-调试" class="headerlink" title="4.4.4 调试"></a>4.4.4 调试</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo -v # 看当前版本</span><br></pre></td></tr></table></figure>

<h3 id="4-5-注意事项"><a href="#4-5-注意事项" class="headerlink" title="4.5 注意事项"></a>4.5 注意事项</h3><ul>
<li>markdown 想要正常显示需要满足一些格式要求，比如：在文件头描述 title, date ……</li>
<li>生成的静态页面存储在 public 文件夹中</li>
<li>快速添加文章头部的标题、时间、标签等</li>
<li>自动生成目录<ul>
<li>npm install hexo-auto-category –save</li>
</ul>
</li>
<li>链接<ul>
<li>npm install hexo-abbrlink # 这个不确定用不用</li>
<li>npm install hexo-link-obsidian</li>
</ul>
</li>
<li>安装计数<ul>
<li>npm i –save hexo-wordcount</li>
</ul>
</li>
<li>忽略一些文章<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 修改 _config.yml</span><br><span class="line">skip_render: [&#x27;in_progress/**/*&#x27;]</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="5-参考"><a href="#5-参考" class="headerlink" title="5 参考"></a>5 参考</h2><p><a target="_blank" rel="noopener" href="https://www.ngui.cc/el/1611711.html?action=onClick">https://www.ngui.cc/el/1611711.html?action=onClick</a></p>
<h2 id="6-问题"><a href="#6-问题" class="headerlink" title="6 问题"></a>6 问题</h2><ul>
<li>建 blog 还可以和什么连在一起用？</li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/wangsidadehao/article/details/78540724">https://blog.csdn.net/wangsidadehao/article/details/78540724</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/27/%E6%9E%84%E9%80%A0%E7%AC%94%E8%AE%B0%E7%B3%BB%E7%BB%9F_Obsidian_github.io_hexo/" data-id="cllt0h4lb0001ytp933ya7efl" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2023/08/26/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">August 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/08/27/%E6%9E%84%E9%80%A0%E7%AC%94%E8%AE%B0%E7%B3%BB%E7%BB%9F_Obsidian_github.io_hexo/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/08/26/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Yan.Xie<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>